pap2: (sip device)
extension 666, 777
set proxy, outbound proxy address to asterisk box IP
old way: ext to direct dial to 7777 dial plan: S0<:7777>
- causes simulate inbound
- but this takes up the inbound line
new way: ext to direct dial to 1002
set up 1002 extensions in extensions_custom.conf to go to ivr

freepbx:
/etc/asterisk/sip_nat.conf - extern/local ips
/etc/asterisk/extensions_override_freepbx.conf - external sip info
asterisk -r to attach
extensions (sip devices)
- 666, 777
- sip show peers
trunk
- flowroute trunk
-- XXX lots of config here, but should be in repo
-- XXX do we need an ipkall trunk to register?
- callcentric trunk, see below
inbound route
- ipkall-1
-- set destination ivr
-- then incoming 7777 from sip device will go here immediately
outbound route
- single route going to flowroute?

router:
asterisk ports to forward
5060 udp
10000-20000 udp

ipkall:
ipkall is incoming sip and did only
phone.ipkall.com
update ip address in web ui to external ip of asterisk box
update name of sip uri to ipkall-1 to match extensoin_override_freepbx.conf

flowroute:
flowroute is outgoing sip only
no config at flowroute site

callcentric:
callcentric is incoming number, can also use for outgoing
https://my.callcentric.com/how_to_start.php?pid=3&device=15&go.x=113&go.y=15&go=Continue
no config at callcentric site?
add SIP trunk to freepbx
- this is needed for incoming even though it appears to only apply to outgoing!
- outgoing settings might not be required, but registration definately is
- use callcentric moderator 1777 moderator number, not phone number!
- phone should now be registered at callcentric site
edit sip_general_custom.conf
skip outbound route, extension config for now
add inbound route
- accept any DID, probably want to change this
- this just moves all incoming to desired dest, don't need to config for
  callcentric





asterisk feature code? to call specific number
extensions_custom.conf
(replace XXXDESTINATION)
  [from-internal-custom]
  include => 999
  include => 1000

  [999]
  exten => 999,1,Playback(demo-congrats)
  exten => 999,2,Hangup()

  [1000]
  exten => 1000,1,Dial(SIP/flowroute/XXXDESTINATION,300,)
  exten => 1000,2,Hangup()

IVR:

copy media to /var/lib/asterisk/sounds/custom
can use subdirectory
add with gui


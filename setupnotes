pap2: (sip device)
extension 666, 777
set proxy, outbound proxy address to asterisk box IP
old way: ext to direct dial to 7777 dial plan: S0<:7777>
- causes simulate inbound
- but this takes up the inbound line
new way: ext to direct dial to 1002
set up 1002 extensions in extensions_custom.conf to go to ivr

freepbx:
/etc/asterisk/sip_nat.conf - extern/local ips
/etc/asterisk/extensions_override_freepbx.conf - external sip info
asterisk -r to attach
extensions (sip devices)
- 666, 777
- sip show peers
trunk
inbound route
- ipkall-1
- set destination ivr
- then incoming 7777 from sip device will go here immediately
outbound route

router:
asterisk ports to forward
5060 udp
10000-20000 udp

ipkall: (incoming sip and did)
phone.ipkall.com
update ip address in web ui to external ip of asterisk box
update name of sip uri to ipkall-1 to match extensoin_override_freepbx.conf

flowroute: (outgoing sip)
no config


asterisk feature code? to call specific number
extensions_custom.conf
(replace XXXDESTINATION)
  [from-internal-custom]
  include => 999
  include => 1000

  [999]
  exten => 999,1,Playback(demo-congrats)
  exten => 999,2,Hangup()

  [1000]
  exten => 1000,1,Dial(SIP/flowroute/XXXDESTINATION,300,)
  exten => 1000,2,Hangup()

IVR:

copy media to /var/lib/asterisk/sounds/custom
can use subdirectory
add with gui



Incoming Bandwidth              Outgoing Bandwidth
Calls: 2        Calls: 2
RTP: 4.69 Kbps  RTP: 4.69 Kbps
UDP: 3.13 Kbps  UDP: 3.13 Kbps
IP: 7.81 Kibps  IP: 7.81 Kibps
Protocol: MGCP  Protocol: SIP
Audio Codec: 8.00g.729a Kbps    Audio Codec: 8.00g.729a Kbps
*MGCP overhead is disregarded!  *SIP overhead is disregarded!
Incoming bandwidth:     47.25 Kbps
0.05 Mbps
5.91 KBps
0.01 MBps       Outgoing bandwidth:     47.25 Kibps
0.05 Mbps
5.91 KBps
0.01 MBps
Total bandwidth (incoming and outgoing):                94.5 Kbps
0.09 Mbps
11.81 KBps
0.01 MBps


equipment to look for:
ATAs
phones

requirements for a node:
power - laptop+phone or arm+phone, how many watts?
public access
phone mounting
bandwidth - 47KPBS?
ip address - dyndns or similar
